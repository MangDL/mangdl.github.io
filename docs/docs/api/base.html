<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>mangdl.api.base API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/atom-one-dark.min.css" crossorigin>
<style>html{scrollbar-face-color:#646464;scrollbar-base-color:#646464;scrollbar-3dlight-color:#646464;scrollbar-highlight-color:#646464;scrollbar-track-color:#000;scrollbar-arrow-color:#000;scrollbar-shadow-color:#646464;scrollbar-dark-shadow-color:#646464}::-webkit-scrollbar{width:14px;height:3px}::-webkit-scrollbar-button{background-color:#000;height:3px}::-webkit-scrollbar-track{background-color:#646464}::-webkit-scrollbar-track-piece{background-color:#000}::-webkit-scrollbar-thumb{height:50px;background-color:#666;border-radius:7px}::-webkit-scrollbar-corner{background-color:#646464}::-webkit-resizer{background-color:#666}:root{--highlight-color:#978141}.flex{display:flex !important}body{line-height:1.5em;color:#fff;background-color:#0f0f0f}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{color:#fff;width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid transparent;background:#262626}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em;font-family:Liberation Mono}h2{font-size:1.75em;margin:.75em 0 .25em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#70BAFF;text-decoration:none;transition:color .2s ease-in-out}a:hover{color:#CDB4DB}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#79aaf8}pre code{background:transparent;font-size:.8em;line-height:1.4em}code{background:rgba(255,255,255,0.1);padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#1e2122;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #646464}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 2em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:0 0}.name{background:#000;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#0b0b0b}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{background:#282c34;max-height:500px;margin:0;overflow-x:scroll;overflow-y:scroll}.source pre code{font-size:12px;overflow-x:initial}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;border-left:1px solid #1b1b1b}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<script src="/script.js"></script>
<link rel="stylesheet" href="/styles.css">
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>mangdl.api.base</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import ast
import os
import re
import shutil
import sys
import time
from dataclasses import dataclass, field
from functools import partial
from multiprocessing.pool import ThreadPool
from typing import Any, Callable, Dict, List, Type, Union

import click
import httpx
import patoolib
from bs4 import BeautifulSoup
from tqdm import tqdm
from yarl import URL

from ..utils import style
from ..utils.exceptions import DownloadFailed
from ..utils.style import ct

METHODS = [&#34;get&#34;, &#34;options&#34;, &#34;head&#34;, &#34;post&#34;, &#34;put&#34;, &#34;patch&#34;, &#34;delete&#34;]
SESSION = httpx.Client()

def _req(
        url: str,
        ra: Callable[[httpx.Response], int]=None,
        method: str = &#34;get&#34;,
        session: httpx.Client = SESSION,
        *args: List[Any],
        **kwargs: Dict[str, Any]
    ) -&gt; httpx.Response:
    &#34;&#34;&#34;
    Custom request function with retry after capabilities for 429s.

    Args:
        url (str): URL to send the request to.
        ra (Callable[[httpx.Response], int], optional): Retry after function,
            receives the Response object and returns the seconds before
            retrying. Defaults to None.
        method (str, optional): The request method. Defaults to &#34;get&#34;.
        session (httpx.Client, optional): Session client. Defaults to SESSION.

    Returns:
        httpx.Response: Response object.
    &#34;&#34;&#34;
    resp = getattr(session, method)(url, follow_redirects=True, *args, **kwargs)
    if resp.status_code == 429:
        if ra:
            time.sleep(ra(resp))
            return _req(url, ra, method, session, *args, **kwargs)
    return resp

class req:
    pass

class ddos_guard:
    pass

ddos_resp = httpx.post(&#34;https://check.ddos-guard.net/check.js&#34;)
ddos_cookies = {k: v for k, v in ddos_resp.cookies.items()}
ddos_session = httpx.Client(cookies=ddos_cookies)

req_dict = {
    req: {},
    ddos_guard: {&#34;session&#34;: ddos_session},
}

for r, kw in req_dict.items():
    for i in METHODS:
        setattr(r, i, partial(_req, method=i, **kw))

def soup(url: str, req: Type[req]=req, method: str=&#34;get&#34;, **kwargs: Dict[str, Any]) -&gt; BeautifulSoup:
    &#34;&#34;&#34;
    Returns a soup from the given url.

    Args:
        url (str): URL to get the soup from.
        req (Type[req], optional): Object to call the methods from. Defaults to req.

    Returns:
        BeautifulSoup: the soup
    &#34;&#34;&#34;
    return BeautifulSoup(getattr(req, method)(url, **kwargs).text, &#34;lxml&#34;)

@dataclass
class Vls:
    vdict   : Dict[str, Any]
    ls      : List[str]

@dataclass
class Ch:
    url              : str
    ch               : Union[int, float, None]
    vol              : Union[int, float, None]
    title            : str
    views            : int                      = 0
    uploaded_at      : str                      = None
    scanlator_groups : List[str]                = field(default_factory=list)
    user             : str                      = None
    imgs             : List[str]                = field(default_factory=list)


@dataclass
class Manga:
    url             : str
    title           : str
    author          : List[str]
    artist          : List[str]                     = field(default_factory=list)
    covers          : List[str]                     = field(default_factory=list)
    alt_titles      : List[str]                     = field(default_factory=list)
    status          : int                           = -1
    demographics    : str                           = None
    content_rating  : str                           = None
    genres          : Dict[str, str]                = field(default_factory=dict)
    updated_at      : str                           = None
    created_at      : str                           = None
    views           : int                           = None
    description     : str                           = &#34;No description available.&#34;
    links           : Dict[str, str]                = field(default_factory=dict)
    chapters        : Dict[Union[int, float], Ch]   = field(default_factory=list)


def tblp(ls: List[str], ht: str=&#34;title&#34;, prompt: str=&#39;Enter the index of the manga to be downloaded&#39;):
    &#34;&#34;&#34;
    Table prompt.
    Receive a list of items, format it in a table form and print,
    then prompt the user to choose from the list using an index.

    Args:
        ls (List[str]): List of items.
        ht (str, optional): [description]. Defaults to &#34;title&#34;.
        prompt (str, optional): [description]. Defaults to &#39;Enter the index of the manga to be downloaded&#39;.

    Returns:
        click.prompt: The input of the user.
    &#34;&#34;&#34;
    ct.panel(&#34;Search Results&#34;)
    ct.table([&#34;index&#34;, ht], enumerate(ls))

    return click.prompt(
        style.ch_t4(f&#39;{prompt}, defaults to 0&#39;), &#39;0&#39;,
        type=click.Choice(
            [str(i) for i in range(len(ls))]
        ),
        show_choices=False,
        show_default=False
    )


def sanitize_filename(filename: str) -&gt; str:
    &#34;&#34;&#34;
    Sanitize the given filename.

    Args:
        filename (str): The filename to be sanitized.

    Returns:
        str: Sanitized filename.
    &#34;&#34;&#34;
    return re.sub(re.compile(r&#34;[&lt;&gt;:\&#34;/\\|?*]&#34;, re.DOTALL), &#34;&#34;, str(filename))


def get_extension(filename: str) -&gt; str:
    &#34;&#34;&#34;
    Get the file extension of a file from the given filename.

    Args:
        filename (str): The filename to get the file extension from.

    Returns:
        str: The file extension from the given filename.
    &#34;&#34;&#34;
    return filename.strip(&#34;/&#34;).split(&#34;/&#34;)[-1].split(&#34;?&#34;)[0].split(&#34;.&#34;)[-1]

def ordinal(n: int) -&gt; str:
    &#34;&#34;&#34;
    Convert the given number to ordinal number.

    Args:
        n (int): The number to convert into ordinal number.

    Returns:
        str: The said ordinal number.
    &#34;&#34;&#34;
    return &#34;%d%s&#34; % (n,&#34;tsnrhtdd&#34;[(n//10%10!=1)*(n%10&lt;4)*n%10::4])

def _cr(rs: str):
    &#34;&#34;&#34;
    The function that calculates the range.

    Args:
        rs (str): The range string where the range is calculated from.

    Yields:
        Callable[[Any], bool]: The function that checks if the given int is within the range or not.
    &#34;&#34;&#34;

    for matches in re.finditer(r&#34;(?:(-?[0-9.]*)[:](-?[0-9.]*)|(-?[0-9.]+))&#34;, rs):
        start, end, singular = matches.groups()
        if (start and end) and float(start) &gt; float(end):
            start, end = end, start
        yield (lambda x, s=singular: float(s) == x) if singular else (lambda x: True) if not (start or end) else (lambda x, s=start: x &gt;= float(s)) if start and not end else (lambda x, e=end: x &lt;= float(e)) if not start and end else (lambda x, s=start, e=end: float(s) &lt;= x &lt;= float(e))
    if not rs:
        return lambda *args, **kwargs: True

def cr(rs: str) -&gt; Callable[[int], bool]:
    &#34;&#34;&#34;
    Returns a function that checks if the given int is within the range or not.
    The range is calculated from the given string.

    Args:
        rs (str): The range string where the range is calculated from.

    Returns:
        Callable[[int], bool]: The function that checks if the given int is within the range or not.
    &#34;&#34;&#34;


    if rs:
        return lambda x: any(condition(x) for condition in _cr(rs))
    else:
        return lambda x: True


class Downloader:
    def __init__(
        self,
        ch_fn: Callable[[Any], List[str]],
        ra: Callable[[httpx.Response], int]=None,
        headers: Dict[str, Any] = {},
        cookies: Dict[str, Any] = {},
        range: str=&#39;&#39;,
        directory: str=None,
        overwrite: bool=True,
        format: str=&#39;cbz&#39;,
        delfolder: bool=True,
        retry: int=3,
        retryprompt: bool=False,
        threads: int=30,
        **kwargs: Dict[str, Any]
    ):
        self.kwargs = kwargs
        local = locals()
        for i in [&#34;ch_fn&#34;, &#34;ra&#34;, &#34;headers&#34;, &#34;cookies&#34;, &#34;overwrite&#34;, &#34;delfolder&#34;, &#34;retry&#34;, &#34;retryprompt&#34;, &#34;threads&#34;]:
            setattr(self, i, local[i])
        if ddir:= directory:
            self.ddir = ddir
        elif sys.platform == &#34;win32&#34;:
            self.ddir = os.path.join(os.path.join(os.environ[&#39;USERPROFILE&#39;]), &#39;Desktop&#39;, &#39;Manga&#39;)
        else:
            self.ddir = os.path.join(os.path.expanduser(&#39;~&#39;), &#34;Manga&#34;)
        self.format = format.lower()
        self.check = cr(range)

    def _dlf(self, file: list[str], n: int=0):
        &#34;&#34;&#34;
        The core individual image downloader.

        Args:
            file (str): List containing the filename and the url of the file.
            n (int, optional): Times the download for this certain file is retried. Defaults to 0.
        &#34;&#34;&#34;
        if (n+1) == self.retry:
            return False
        else:
            with open(file[0] + &#34;.tmp&#34;, &#34;wb&#34;) as f:
                try:
                    with httpx.stream(&#34;GET&#34;, file[1], headers=self.headers, cookies=self.cookies) as r:
                        if r.status_code == 200:
                            for chunk in r.iter_bytes(chunk_size=8192):
                                f.write(chunk)
                        elif r.status_code == 429:
                            retry = self.ra(r)
                            time.sleep(retry)
                            self._dlf(file, n)
                except (httpx.ReadTimeout, httpx.ConnectTimeout):
                    self._dlf(file, n+1)
            return True

    def dlf(self, file: List[str]):
        &#34;&#34;&#34;
        Individual image downloader.

        Args:
            file (str): List containing the filename and the url of the file.
        &#34;&#34;&#34;
        try:
            os.makedirs(os.path.split(file[0])[0])
        except FileExistsError:
            pass
        if os.path.isfile(f&#34;{file[0]}.tmp&#34;):
            os.remove(f&#34;{file[0]}.tmp&#34;)
        f = self._dlf(file)
        if f:
            os.replace(f&#34;{file[0]}.tmp&#34;, file[0])
        else:
            raise DownloadFailed(f&#34;Download of {file[1]} failed.&#34;)

    def dlch(self, k: Union[int, float], v: List[str], n: int=0):
        &#34;&#34;&#34;
        Individual chapter downloader.

        Args:
            k (Union[int, float]): Chapter number.
            v (List[str]): List of image urls.
        &#34;&#34;&#34;
        dl = True
        jdir = os.path.join(self.ddir, self.title, sanitize_filename(k))
        if self.check(k):
            if os.path.isdir(jdir):
                if self.overwrite:
                    shutil.rmtree(jdir)
                else:
                    dl = False
            if os.path.isfile(f&#34;{jdir}.{self.format}&#34;):
                if self.overwrite:
                    os.remove(f&#34;{jdir}.{self.format}&#34;)
                else:
                    dl = False
        if (n+1) == self.retry:
            dl = False
        if dl:
            chapter_name = str(k)
            jdir = os.path.join(self.ddir, self.title, sanitize_filename(chapter_name))
            dl = True
            if dl:
                files = []
                for index, page in enumerate(self.ch_fn(v)):
                    filename = os.path.join(
                        self.ddir,
                        self.title,
                        sanitize_filename(chapter_name),
                        f&#34;{index}.{get_extension(str(page))}&#34;
                    ).replace(&#34;\\&#34;, &#34;/&#34;)
                    files.append((filename, page))
                fmt = style.t1(style.ch_ac1(chapter_name) + &#34; [{remaining_s:05.2f} secs, {rate_fmt:0&gt;12}] &#34; + style.ldb(&#34;{bar}&#34;) +&#34; [{n:03d}/{total:03d}, {percentage:03.0f}%]&#34;)
                try:
                    with ThreadPool(self.threads) as pool:
                        list(tqdm(pool.imap(self.dlf, files), total=len(files), leave=True, unit=&#34; img&#34;, disable=False, dynamic_ncols=True, smoothing=1, bar_format=fmt))
                except DownloadFailed as e:
                    if self.retryprompt:
                        self.dlch(k, v, n+1)
                    else:
                        raise e

                if self.format != &#34;folder&#34;:
                    patoolib.create_archive(f&#34;{jdir}.{self.format}&#34;, [i[0] for i in files], verbosity=-1)
                    if self.delfolder:
                        shutil.rmtree(jdir)

    def dl(self, title: str, chs: Dict[Union[int, float], list[str]]):
        self.title = title
        for k, v in chs.items():
            self.dlch(k, v)

    def dl_chdls(
        self,
        chdls: List[Dict[Union[float, int, None], str]],
        title: str,
    ):
        n = 1
        chs = {}
        for r in chdls:
            ch, arg = list(r.items())[0]
            if ch:
                if isinstance(ch, int) or isinstance(ch, float):
                    k = ch
                else:
                    k = ast.literal_eval(ch)
            else:
                k = -n
                n += 1
            chs[k] = arg
        self.dl(title, chs)

    def cli(
        self,
        cli_search: Callable[[str], Dict[str, str]],
        chdls: Callable[[str], List[Dict[Union[float, int, None], str]]],
        title: str,
    ):
        sr = cli_search(title, **self.kwargs)
        if sr:
            ls = list(sr.keys())
            title = ls[int(tblp(ls))]
            self.dl_chdls(chdls(sr[title]), title)
        else:
            ct.panel(style.warning(f&#34;No manga with similar title with the requested title or anything similar found. Use other search terms or remove some filters.&#34;))

def urel(url: str):
    url = URL(url)
    if url.is_absolute():
        url = url.relative()
    return url</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="mangdl.api.base.cr"><code class="name flex">
<span>def <span class="ident">cr</span></span>(<span>rs: str) ‑> Callable[[int], bool]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a function that checks if the given int is within the range or not.
The range is calculated from the given string.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>rs</code></strong> :&ensp;<code>str</code></dt>
<dd>The range string where the range is calculated from.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Callable[[int], bool]</code></dt>
<dd>The function that checks if the given int is within the range or not.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cr(rs: str) -&gt; Callable[[int], bool]:
    &#34;&#34;&#34;
    Returns a function that checks if the given int is within the range or not.
    The range is calculated from the given string.

    Args:
        rs (str): The range string where the range is calculated from.

    Returns:
        Callable[[int], bool]: The function that checks if the given int is within the range or not.
    &#34;&#34;&#34;


    if rs:
        return lambda x: any(condition(x) for condition in _cr(rs))
    else:
        return lambda x: True</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.get_extension"><code class="name flex">
<span>def <span class="ident">get_extension</span></span>(<span>filename: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Get the file extension of a file from the given filename.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>filename</code></strong> :&ensp;<code>str</code></dt>
<dd>The filename to get the file extension from.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The file extension from the given filename.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_extension(filename: str) -&gt; str:
    &#34;&#34;&#34;
    Get the file extension of a file from the given filename.

    Args:
        filename (str): The filename to get the file extension from.

    Returns:
        str: The file extension from the given filename.
    &#34;&#34;&#34;
    return filename.strip(&#34;/&#34;).split(&#34;/&#34;)[-1].split(&#34;?&#34;)[0].split(&#34;.&#34;)[-1]</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.ordinal"><code class="name flex">
<span>def <span class="ident">ordinal</span></span>(<span>n: int) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Convert the given number to ordinal number.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>n</code></strong> :&ensp;<code>int</code></dt>
<dd>The number to convert into ordinal number.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The said ordinal number.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ordinal(n: int) -&gt; str:
    &#34;&#34;&#34;
    Convert the given number to ordinal number.

    Args:
        n (int): The number to convert into ordinal number.

    Returns:
        str: The said ordinal number.
    &#34;&#34;&#34;
    return &#34;%d%s&#34; % (n,&#34;tsnrhtdd&#34;[(n//10%10!=1)*(n%10&lt;4)*n%10::4])</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.sanitize_filename"><code class="name flex">
<span>def <span class="ident">sanitize_filename</span></span>(<span>filename: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Sanitize the given filename.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>filename</code></strong> :&ensp;<code>str</code></dt>
<dd>The filename to be sanitized.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Sanitized filename.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sanitize_filename(filename: str) -&gt; str:
    &#34;&#34;&#34;
    Sanitize the given filename.

    Args:
        filename (str): The filename to be sanitized.

    Returns:
        str: Sanitized filename.
    &#34;&#34;&#34;
    return re.sub(re.compile(r&#34;[&lt;&gt;:\&#34;/\\|?*]&#34;, re.DOTALL), &#34;&#34;, str(filename))</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.soup"><code class="name flex">
<span>def <span class="ident">soup</span></span>(<span>url: str, req: Type[<a title="mangdl.api.base.req" href="#mangdl.api.base.req">req</a>] = mangdl.api.base.req, method: str = 'get', **kwargs: Dict[str, Any]) ‑> bs4.BeautifulSoup</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a soup from the given url.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>url</code></strong> :&ensp;<code>str</code></dt>
<dd>URL to get the soup from.</dd>
<dt><strong><code>req</code></strong> :&ensp;<code>Type[<a title="mangdl.api.base.req" href="#mangdl.api.base.req">req</a>]</code>, optional</dt>
<dd>Object to call the methods from. Defaults to req.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>BeautifulSoup</code></dt>
<dd>the soup</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def soup(url: str, req: Type[req]=req, method: str=&#34;get&#34;, **kwargs: Dict[str, Any]) -&gt; BeautifulSoup:
    &#34;&#34;&#34;
    Returns a soup from the given url.

    Args:
        url (str): URL to get the soup from.
        req (Type[req], optional): Object to call the methods from. Defaults to req.

    Returns:
        BeautifulSoup: the soup
    &#34;&#34;&#34;
    return BeautifulSoup(getattr(req, method)(url, **kwargs).text, &#34;lxml&#34;)</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.tblp"><code class="name flex">
<span>def <span class="ident">tblp</span></span>(<span>ls: List[str], ht: str = 'title', prompt: str = 'Enter the index of the manga to be downloaded')</span>
</code></dt>
<dd>
<div class="desc"><p>Table prompt.
Receive a list of items, format it in a table form and print,
then prompt the user to choose from the list using an index.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ls</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>List of items.</dd>
<dt><strong><code>ht</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>[description]. Defaults to "title".</dd>
<dt><strong><code>prompt</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>[description]. Defaults to 'Enter the index of the manga to be downloaded'.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>click.prompt</code></dt>
<dd>The input of the user.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def tblp(ls: List[str], ht: str=&#34;title&#34;, prompt: str=&#39;Enter the index of the manga to be downloaded&#39;):
    &#34;&#34;&#34;
    Table prompt.
    Receive a list of items, format it in a table form and print,
    then prompt the user to choose from the list using an index.

    Args:
        ls (List[str]): List of items.
        ht (str, optional): [description]. Defaults to &#34;title&#34;.
        prompt (str, optional): [description]. Defaults to &#39;Enter the index of the manga to be downloaded&#39;.

    Returns:
        click.prompt: The input of the user.
    &#34;&#34;&#34;
    ct.panel(&#34;Search Results&#34;)
    ct.table([&#34;index&#34;, ht], enumerate(ls))

    return click.prompt(
        style.ch_t4(f&#39;{prompt}, defaults to 0&#39;), &#39;0&#39;,
        type=click.Choice(
            [str(i) for i in range(len(ls))]
        ),
        show_choices=False,
        show_default=False
    )</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.urel"><code class="name flex">
<span>def <span class="ident">urel</span></span>(<span>url: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def urel(url: str):
    url = URL(url)
    if url.is_absolute():
        url = url.relative()
    return url</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="mangdl.api.base.Ch"><code class="flex name class">
<span>class <span class="ident">Ch</span></span>
<span>(</span><span>url: str, ch: Union[int, float, ForwardRef(None)], vol: Union[int, float, ForwardRef(None)], title: str, views: int = 0, uploaded_at: str = None, scanlator_groups: List[str] = &lt;factory&gt;, user: str = None, imgs: List[str] = &lt;factory&gt;)</span>
</code></dt>
<dd>
<div class="desc"><p>Ch(url: str, ch: Union[int, float, NoneType], vol: Union[int, float, NoneType], title: str, views: int = 0, uploaded_at: str = None, scanlator_groups: List[str] = <factory>, user: str = None, imgs: List[str] = <factory>)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class Ch:
    url              : str
    ch               : Union[int, float, None]
    vol              : Union[int, float, None]
    title            : str
    views            : int                      = 0
    uploaded_at      : str                      = None
    scanlator_groups : List[str]                = field(default_factory=list)
    user             : str                      = None
    imgs             : List[str]                = field(default_factory=list)</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.Ch.ch"><code class="name">var <span class="ident">ch</span> : Union[int, float, ForwardRef(None)]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.imgs"><code class="name">var <span class="ident">imgs</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.scanlator_groups"><code class="name">var <span class="ident">scanlator_groups</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.title"><code class="name">var <span class="ident">title</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.uploaded_at"><code class="name">var <span class="ident">uploaded_at</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.url"><code class="name">var <span class="ident">url</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.user"><code class="name">var <span class="ident">user</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.views"><code class="name">var <span class="ident">views</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Ch.vol"><code class="name">var <span class="ident">vol</span> : Union[int, float, ForwardRef(None)]</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.Downloader"><code class="flex name class">
<span>class <span class="ident">Downloader</span></span>
<span>(</span><span>ch_fn: Callable[[Any], List[str]], ra: Callable[[httpx.Response], int] = None, headers: Dict[str, Any] = {}, cookies: Dict[str, Any] = {}, range: str = '', directory: str = None, overwrite: bool = True, format: str = 'cbz', delfolder: bool = True, retry: int = 3, retryprompt: bool = False, threads: int = 30, **kwargs: Dict[str, Any])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Downloader:
    def __init__(
        self,
        ch_fn: Callable[[Any], List[str]],
        ra: Callable[[httpx.Response], int]=None,
        headers: Dict[str, Any] = {},
        cookies: Dict[str, Any] = {},
        range: str=&#39;&#39;,
        directory: str=None,
        overwrite: bool=True,
        format: str=&#39;cbz&#39;,
        delfolder: bool=True,
        retry: int=3,
        retryprompt: bool=False,
        threads: int=30,
        **kwargs: Dict[str, Any]
    ):
        self.kwargs = kwargs
        local = locals()
        for i in [&#34;ch_fn&#34;, &#34;ra&#34;, &#34;headers&#34;, &#34;cookies&#34;, &#34;overwrite&#34;, &#34;delfolder&#34;, &#34;retry&#34;, &#34;retryprompt&#34;, &#34;threads&#34;]:
            setattr(self, i, local[i])
        if ddir:= directory:
            self.ddir = ddir
        elif sys.platform == &#34;win32&#34;:
            self.ddir = os.path.join(os.path.join(os.environ[&#39;USERPROFILE&#39;]), &#39;Desktop&#39;, &#39;Manga&#39;)
        else:
            self.ddir = os.path.join(os.path.expanduser(&#39;~&#39;), &#34;Manga&#34;)
        self.format = format.lower()
        self.check = cr(range)

    def _dlf(self, file: list[str], n: int=0):
        &#34;&#34;&#34;
        The core individual image downloader.

        Args:
            file (str): List containing the filename and the url of the file.
            n (int, optional): Times the download for this certain file is retried. Defaults to 0.
        &#34;&#34;&#34;
        if (n+1) == self.retry:
            return False
        else:
            with open(file[0] + &#34;.tmp&#34;, &#34;wb&#34;) as f:
                try:
                    with httpx.stream(&#34;GET&#34;, file[1], headers=self.headers, cookies=self.cookies) as r:
                        if r.status_code == 200:
                            for chunk in r.iter_bytes(chunk_size=8192):
                                f.write(chunk)
                        elif r.status_code == 429:
                            retry = self.ra(r)
                            time.sleep(retry)
                            self._dlf(file, n)
                except (httpx.ReadTimeout, httpx.ConnectTimeout):
                    self._dlf(file, n+1)
            return True

    def dlf(self, file: List[str]):
        &#34;&#34;&#34;
        Individual image downloader.

        Args:
            file (str): List containing the filename and the url of the file.
        &#34;&#34;&#34;
        try:
            os.makedirs(os.path.split(file[0])[0])
        except FileExistsError:
            pass
        if os.path.isfile(f&#34;{file[0]}.tmp&#34;):
            os.remove(f&#34;{file[0]}.tmp&#34;)
        f = self._dlf(file)
        if f:
            os.replace(f&#34;{file[0]}.tmp&#34;, file[0])
        else:
            raise DownloadFailed(f&#34;Download of {file[1]} failed.&#34;)

    def dlch(self, k: Union[int, float], v: List[str], n: int=0):
        &#34;&#34;&#34;
        Individual chapter downloader.

        Args:
            k (Union[int, float]): Chapter number.
            v (List[str]): List of image urls.
        &#34;&#34;&#34;
        dl = True
        jdir = os.path.join(self.ddir, self.title, sanitize_filename(k))
        if self.check(k):
            if os.path.isdir(jdir):
                if self.overwrite:
                    shutil.rmtree(jdir)
                else:
                    dl = False
            if os.path.isfile(f&#34;{jdir}.{self.format}&#34;):
                if self.overwrite:
                    os.remove(f&#34;{jdir}.{self.format}&#34;)
                else:
                    dl = False
        if (n+1) == self.retry:
            dl = False
        if dl:
            chapter_name = str(k)
            jdir = os.path.join(self.ddir, self.title, sanitize_filename(chapter_name))
            dl = True
            if dl:
                files = []
                for index, page in enumerate(self.ch_fn(v)):
                    filename = os.path.join(
                        self.ddir,
                        self.title,
                        sanitize_filename(chapter_name),
                        f&#34;{index}.{get_extension(str(page))}&#34;
                    ).replace(&#34;\\&#34;, &#34;/&#34;)
                    files.append((filename, page))
                fmt = style.t1(style.ch_ac1(chapter_name) + &#34; [{remaining_s:05.2f} secs, {rate_fmt:0&gt;12}] &#34; + style.ldb(&#34;{bar}&#34;) +&#34; [{n:03d}/{total:03d}, {percentage:03.0f}%]&#34;)
                try:
                    with ThreadPool(self.threads) as pool:
                        list(tqdm(pool.imap(self.dlf, files), total=len(files), leave=True, unit=&#34; img&#34;, disable=False, dynamic_ncols=True, smoothing=1, bar_format=fmt))
                except DownloadFailed as e:
                    if self.retryprompt:
                        self.dlch(k, v, n+1)
                    else:
                        raise e

                if self.format != &#34;folder&#34;:
                    patoolib.create_archive(f&#34;{jdir}.{self.format}&#34;, [i[0] for i in files], verbosity=-1)
                    if self.delfolder:
                        shutil.rmtree(jdir)

    def dl(self, title: str, chs: Dict[Union[int, float], list[str]]):
        self.title = title
        for k, v in chs.items():
            self.dlch(k, v)

    def dl_chdls(
        self,
        chdls: List[Dict[Union[float, int, None], str]],
        title: str,
    ):
        n = 1
        chs = {}
        for r in chdls:
            ch, arg = list(r.items())[0]
            if ch:
                if isinstance(ch, int) or isinstance(ch, float):
                    k = ch
                else:
                    k = ast.literal_eval(ch)
            else:
                k = -n
                n += 1
            chs[k] = arg
        self.dl(title, chs)

    def cli(
        self,
        cli_search: Callable[[str], Dict[str, str]],
        chdls: Callable[[str], List[Dict[Union[float, int, None], str]]],
        title: str,
    ):
        sr = cli_search(title, **self.kwargs)
        if sr:
            ls = list(sr.keys())
            title = ls[int(tblp(ls))]
            self.dl_chdls(chdls(sr[title]), title)
        else:
            ct.panel(style.warning(f&#34;No manga with similar title with the requested title or anything similar found. Use other search terms or remove some filters.&#34;))</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="mangdl.api.base.Downloader.cli"><code class="name flex">
<span>def <span class="ident">cli</span></span>(<span>self, cli_search: Callable[[str], Dict[str, str]], chdls: Callable[[str], List[Dict[Union[float, int, ForwardRef(None)], str]]], title: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cli(
    self,
    cli_search: Callable[[str], Dict[str, str]],
    chdls: Callable[[str], List[Dict[Union[float, int, None], str]]],
    title: str,
):
    sr = cli_search(title, **self.kwargs)
    if sr:
        ls = list(sr.keys())
        title = ls[int(tblp(ls))]
        self.dl_chdls(chdls(sr[title]), title)
    else:
        ct.panel(style.warning(f&#34;No manga with similar title with the requested title or anything similar found. Use other search terms or remove some filters.&#34;))</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.Downloader.dl"><code class="name flex">
<span>def <span class="ident">dl</span></span>(<span>self, title: str, chs: Dict[Union[int, float], list[str]])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dl(self, title: str, chs: Dict[Union[int, float], list[str]]):
    self.title = title
    for k, v in chs.items():
        self.dlch(k, v)</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.Downloader.dl_chdls"><code class="name flex">
<span>def <span class="ident">dl_chdls</span></span>(<span>self, chdls: List[Dict[Union[float, int, ForwardRef(None)], str]], title: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dl_chdls(
    self,
    chdls: List[Dict[Union[float, int, None], str]],
    title: str,
):
    n = 1
    chs = {}
    for r in chdls:
        ch, arg = list(r.items())[0]
        if ch:
            if isinstance(ch, int) or isinstance(ch, float):
                k = ch
            else:
                k = ast.literal_eval(ch)
        else:
            k = -n
            n += 1
        chs[k] = arg
    self.dl(title, chs)</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.Downloader.dlch"><code class="name flex">
<span>def <span class="ident">dlch</span></span>(<span>self, k: Union[int, float], v: List[str], n: int = 0)</span>
</code></dt>
<dd>
<div class="desc"><p>Individual chapter downloader.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>k</code></strong> :&ensp;<code>Union[int, float]</code></dt>
<dd>Chapter number.</dd>
<dt><strong><code>v</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>List of image urls.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dlch(self, k: Union[int, float], v: List[str], n: int=0):
    &#34;&#34;&#34;
    Individual chapter downloader.

    Args:
        k (Union[int, float]): Chapter number.
        v (List[str]): List of image urls.
    &#34;&#34;&#34;
    dl = True
    jdir = os.path.join(self.ddir, self.title, sanitize_filename(k))
    if self.check(k):
        if os.path.isdir(jdir):
            if self.overwrite:
                shutil.rmtree(jdir)
            else:
                dl = False
        if os.path.isfile(f&#34;{jdir}.{self.format}&#34;):
            if self.overwrite:
                os.remove(f&#34;{jdir}.{self.format}&#34;)
            else:
                dl = False
    if (n+1) == self.retry:
        dl = False
    if dl:
        chapter_name = str(k)
        jdir = os.path.join(self.ddir, self.title, sanitize_filename(chapter_name))
        dl = True
        if dl:
            files = []
            for index, page in enumerate(self.ch_fn(v)):
                filename = os.path.join(
                    self.ddir,
                    self.title,
                    sanitize_filename(chapter_name),
                    f&#34;{index}.{get_extension(str(page))}&#34;
                ).replace(&#34;\\&#34;, &#34;/&#34;)
                files.append((filename, page))
            fmt = style.t1(style.ch_ac1(chapter_name) + &#34; [{remaining_s:05.2f} secs, {rate_fmt:0&gt;12}] &#34; + style.ldb(&#34;{bar}&#34;) +&#34; [{n:03d}/{total:03d}, {percentage:03.0f}%]&#34;)
            try:
                with ThreadPool(self.threads) as pool:
                    list(tqdm(pool.imap(self.dlf, files), total=len(files), leave=True, unit=&#34; img&#34;, disable=False, dynamic_ncols=True, smoothing=1, bar_format=fmt))
            except DownloadFailed as e:
                if self.retryprompt:
                    self.dlch(k, v, n+1)
                else:
                    raise e

            if self.format != &#34;folder&#34;:
                patoolib.create_archive(f&#34;{jdir}.{self.format}&#34;, [i[0] for i in files], verbosity=-1)
                if self.delfolder:
                    shutil.rmtree(jdir)</code></pre>
</details>
</dd>
<dt id="mangdl.api.base.Downloader.dlf"><code class="name flex">
<span>def <span class="ident">dlf</span></span>(<span>self, file: List[str])</span>
</code></dt>
<dd>
<div class="desc"><p>Individual image downloader.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file</code></strong> :&ensp;<code>str</code></dt>
<dd>List containing the filename and the url of the file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dlf(self, file: List[str]):
    &#34;&#34;&#34;
    Individual image downloader.

    Args:
        file (str): List containing the filename and the url of the file.
    &#34;&#34;&#34;
    try:
        os.makedirs(os.path.split(file[0])[0])
    except FileExistsError:
        pass
    if os.path.isfile(f&#34;{file[0]}.tmp&#34;):
        os.remove(f&#34;{file[0]}.tmp&#34;)
    f = self._dlf(file)
    if f:
        os.replace(f&#34;{file[0]}.tmp&#34;, file[0])
    else:
        raise DownloadFailed(f&#34;Download of {file[1]} failed.&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.Manga"><code class="flex name class">
<span>class <span class="ident">Manga</span></span>
<span>(</span><span>url: str, title: str, author: List[str], artist: List[str] = &lt;factory&gt;, covers: List[str] = &lt;factory&gt;, alt_titles: List[str] = &lt;factory&gt;, status: int = -1, demographics: str = None, content_rating: str = None, genres: Dict[str, str] = &lt;factory&gt;, updated_at: str = None, created_at: str = None, views: int = None, description: str = 'No description available.', links: Dict[str, str] = &lt;factory&gt;, chapters: Dict[Union[int, float], <a title="mangdl.api.base.Ch" href="#mangdl.api.base.Ch">Ch</a>] = &lt;factory&gt;)</span>
</code></dt>
<dd>
<div class="desc"><p>Manga(url: str, title: str, author: List[str], artist: List[str] = <factory>, covers: List[str] = <factory>, alt_titles: List[str] = <factory>, status: int = -1, demographics: str = None, content_rating: str = None, genres: Dict[str, str] = <factory>, updated_at: str = None, created_at: str = None, views: int = None, description: str = 'No description available.', links: Dict[str, str] = <factory>, chapters: Dict[Union[int, float], mangdl.api.base.Ch] = <factory>)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class Manga:
    url             : str
    title           : str
    author          : List[str]
    artist          : List[str]                     = field(default_factory=list)
    covers          : List[str]                     = field(default_factory=list)
    alt_titles      : List[str]                     = field(default_factory=list)
    status          : int                           = -1
    demographics    : str                           = None
    content_rating  : str                           = None
    genres          : Dict[str, str]                = field(default_factory=dict)
    updated_at      : str                           = None
    created_at      : str                           = None
    views           : int                           = None
    description     : str                           = &#34;No description available.&#34;
    links           : Dict[str, str]                = field(default_factory=dict)
    chapters        : Dict[Union[int, float], Ch]   = field(default_factory=list)</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.Manga.alt_titles"><code class="name">var <span class="ident">alt_titles</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.artist"><code class="name">var <span class="ident">artist</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.author"><code class="name">var <span class="ident">author</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.chapters"><code class="name">var <span class="ident">chapters</span> : Dict[Union[int, float], <a title="mangdl.api.base.Ch" href="#mangdl.api.base.Ch">Ch</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.content_rating"><code class="name">var <span class="ident">content_rating</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.covers"><code class="name">var <span class="ident">covers</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.created_at"><code class="name">var <span class="ident">created_at</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.demographics"><code class="name">var <span class="ident">demographics</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.description"><code class="name">var <span class="ident">description</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.genres"><code class="name">var <span class="ident">genres</span> : Dict[str, str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.links"><code class="name">var <span class="ident">links</span> : Dict[str, str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.status"><code class="name">var <span class="ident">status</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.title"><code class="name">var <span class="ident">title</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.updated_at"><code class="name">var <span class="ident">updated_at</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.url"><code class="name">var <span class="ident">url</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Manga.views"><code class="name">var <span class="ident">views</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.Vls"><code class="flex name class">
<span>class <span class="ident">Vls</span></span>
<span>(</span><span>vdict: Dict[str, Any], ls: List[str])</span>
</code></dt>
<dd>
<div class="desc"><p>Vls(vdict: Dict[str, Any], ls: List[str])</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class Vls:
    vdict   : Dict[str, Any]
    ls      : List[str]</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.Vls.ls"><code class="name">var <span class="ident">ls</span> : List[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.Vls.vdict"><code class="name">var <span class="ident">vdict</span> : Dict[str, Any]</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.ddos_guard"><code class="flex name class">
<span>class <span class="ident">ddos_guard</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ddos_guard:
    pass</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.ddos_guard.delete"><code class="name">var <span class="ident">delete</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.get"><code class="name">var <span class="ident">get</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.head"><code class="name">var <span class="ident">head</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.options"><code class="name">var <span class="ident">options</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.patch"><code class="name">var <span class="ident">patch</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.post"><code class="name">var <span class="ident">post</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.put"><code class="name">var <span class="ident">put</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.ddos_guard"><code class="flex name class">
<span>class <span class="ident">r</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ddos_guard:
    pass</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.ddos_guard.delete"><code class="name">var <span class="ident">delete</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.get"><code class="name">var <span class="ident">get</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.head"><code class="name">var <span class="ident">head</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.options"><code class="name">var <span class="ident">options</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.patch"><code class="name">var <span class="ident">patch</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.post"><code class="name">var <span class="ident">post</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.ddos_guard.put"><code class="name">var <span class="ident">put</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mangdl.api.base.req"><code class="flex name class">
<span>class <span class="ident">req</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class req:
    pass</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mangdl.api.base.req.delete"><code class="name">var <span class="ident">delete</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.get"><code class="name">var <span class="ident">get</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.head"><code class="name">var <span class="ident">head</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.options"><code class="name">var <span class="ident">options</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.patch"><code class="name">var <span class="ident">patch</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.post"><code class="name">var <span class="ident">post</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mangdl.api.base.req.put"><code class="name">var <span class="ident">put</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>MangDL</h1>
<form>
<input id="lunr-search" name="q" placeholder="Search..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {
width: auto;
background: #0f0f0f;
}
.modal-dialog .tingle-modal-box__content {padding: 0;}
#search-status{
font-family: Liberation Mono;
}
footer{
font-family: Liberation Mono;
}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h2>Index</h2>
<div class="toc">
<ul>
<li><a href="/index.html"><strong>Homepage</strong></a></li>
<li><a href="/installation.html"><strong>Installation</strong></a></li>
<li><a href="/upgrade.html"><strong>Upgrading</strong></a></li>
<li>
<a href="/providers.html"><strong>Providers</strong></a>
<ul>
<li><a href="/rejected.html"><strong>Rejected Sites</strong></a></li>
</ul>
</li>
<li><a href="/tou_disc.html"><strong>Terms of Usage & Disclaimer</strong></a></li>
<li><a href="/docs/index.html"><strong>Documentation</strong></a></li>
<li><a href="/changelog.html"><strong>Changelog</strong></a></li>
<li><a href="/license.html"><strong>License</strong></a></li>
<li><a href="/more.html"><strong>More Apps</strong></a></li>
<ul>
</div>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="mangdl.api" href="index.html">mangdl.api</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="two-column">
<li><code><a title="mangdl.api.base.cr" href="#mangdl.api.base.cr">cr</a></code></li>
<li><code><a title="mangdl.api.base.get_extension" href="#mangdl.api.base.get_extension">get_extension</a></code></li>
<li><code><a title="mangdl.api.base.ordinal" href="#mangdl.api.base.ordinal">ordinal</a></code></li>
<li><code><a title="mangdl.api.base.sanitize_filename" href="#mangdl.api.base.sanitize_filename">sanitize_filename</a></code></li>
<li><code><a title="mangdl.api.base.soup" href="#mangdl.api.base.soup">soup</a></code></li>
<li><code><a title="mangdl.api.base.tblp" href="#mangdl.api.base.tblp">tblp</a></code></li>
<li><code><a title="mangdl.api.base.urel" href="#mangdl.api.base.urel">urel</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="mangdl.api.base.Ch" href="#mangdl.api.base.Ch">Ch</a></code></h4>
<ul class="two-column">
<li><code><a title="mangdl.api.base.Ch.ch" href="#mangdl.api.base.Ch.ch">ch</a></code></li>
<li><code><a title="mangdl.api.base.Ch.imgs" href="#mangdl.api.base.Ch.imgs">imgs</a></code></li>
<li><code><a title="mangdl.api.base.Ch.scanlator_groups" href="#mangdl.api.base.Ch.scanlator_groups">scanlator_groups</a></code></li>
<li><code><a title="mangdl.api.base.Ch.title" href="#mangdl.api.base.Ch.title">title</a></code></li>
<li><code><a title="mangdl.api.base.Ch.uploaded_at" href="#mangdl.api.base.Ch.uploaded_at">uploaded_at</a></code></li>
<li><code><a title="mangdl.api.base.Ch.url" href="#mangdl.api.base.Ch.url">url</a></code></li>
<li><code><a title="mangdl.api.base.Ch.user" href="#mangdl.api.base.Ch.user">user</a></code></li>
<li><code><a title="mangdl.api.base.Ch.views" href="#mangdl.api.base.Ch.views">views</a></code></li>
<li><code><a title="mangdl.api.base.Ch.vol" href="#mangdl.api.base.Ch.vol">vol</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.Downloader" href="#mangdl.api.base.Downloader">Downloader</a></code></h4>
<ul class="">
<li><code><a title="mangdl.api.base.Downloader.cli" href="#mangdl.api.base.Downloader.cli">cli</a></code></li>
<li><code><a title="mangdl.api.base.Downloader.dl" href="#mangdl.api.base.Downloader.dl">dl</a></code></li>
<li><code><a title="mangdl.api.base.Downloader.dl_chdls" href="#mangdl.api.base.Downloader.dl_chdls">dl_chdls</a></code></li>
<li><code><a title="mangdl.api.base.Downloader.dlch" href="#mangdl.api.base.Downloader.dlch">dlch</a></code></li>
<li><code><a title="mangdl.api.base.Downloader.dlf" href="#mangdl.api.base.Downloader.dlf">dlf</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.Manga" href="#mangdl.api.base.Manga">Manga</a></code></h4>
<ul class="two-column">
<li><code><a title="mangdl.api.base.Manga.alt_titles" href="#mangdl.api.base.Manga.alt_titles">alt_titles</a></code></li>
<li><code><a title="mangdl.api.base.Manga.artist" href="#mangdl.api.base.Manga.artist">artist</a></code></li>
<li><code><a title="mangdl.api.base.Manga.author" href="#mangdl.api.base.Manga.author">author</a></code></li>
<li><code><a title="mangdl.api.base.Manga.chapters" href="#mangdl.api.base.Manga.chapters">chapters</a></code></li>
<li><code><a title="mangdl.api.base.Manga.content_rating" href="#mangdl.api.base.Manga.content_rating">content_rating</a></code></li>
<li><code><a title="mangdl.api.base.Manga.covers" href="#mangdl.api.base.Manga.covers">covers</a></code></li>
<li><code><a title="mangdl.api.base.Manga.created_at" href="#mangdl.api.base.Manga.created_at">created_at</a></code></li>
<li><code><a title="mangdl.api.base.Manga.demographics" href="#mangdl.api.base.Manga.demographics">demographics</a></code></li>
<li><code><a title="mangdl.api.base.Manga.description" href="#mangdl.api.base.Manga.description">description</a></code></li>
<li><code><a title="mangdl.api.base.Manga.genres" href="#mangdl.api.base.Manga.genres">genres</a></code></li>
<li><code><a title="mangdl.api.base.Manga.links" href="#mangdl.api.base.Manga.links">links</a></code></li>
<li><code><a title="mangdl.api.base.Manga.status" href="#mangdl.api.base.Manga.status">status</a></code></li>
<li><code><a title="mangdl.api.base.Manga.title" href="#mangdl.api.base.Manga.title">title</a></code></li>
<li><code><a title="mangdl.api.base.Manga.updated_at" href="#mangdl.api.base.Manga.updated_at">updated_at</a></code></li>
<li><code><a title="mangdl.api.base.Manga.url" href="#mangdl.api.base.Manga.url">url</a></code></li>
<li><code><a title="mangdl.api.base.Manga.views" href="#mangdl.api.base.Manga.views">views</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.Vls" href="#mangdl.api.base.Vls">Vls</a></code></h4>
<ul class="">
<li><code><a title="mangdl.api.base.Vls.ls" href="#mangdl.api.base.Vls.ls">ls</a></code></li>
<li><code><a title="mangdl.api.base.Vls.vdict" href="#mangdl.api.base.Vls.vdict">vdict</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.ddos_guard" href="#mangdl.api.base.ddos_guard">ddos_guard</a></code></h4>
<ul class="two-column">
<li><code><a title="mangdl.api.base.ddos_guard.delete" href="#mangdl.api.base.ddos_guard.delete">delete</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.get" href="#mangdl.api.base.ddos_guard.get">get</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.head" href="#mangdl.api.base.ddos_guard.head">head</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.options" href="#mangdl.api.base.ddos_guard.options">options</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.patch" href="#mangdl.api.base.ddos_guard.patch">patch</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.post" href="#mangdl.api.base.ddos_guard.post">post</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.put" href="#mangdl.api.base.ddos_guard.put">put</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.ddos_guard" href="#mangdl.api.base.ddos_guard">ddos_guard</a></code></h4>
<ul class="two-column">
<li><code><a title="mangdl.api.base.ddos_guard.delete" href="#mangdl.api.base.ddos_guard.delete">delete</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.get" href="#mangdl.api.base.ddos_guard.get">get</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.head" href="#mangdl.api.base.ddos_guard.head">head</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.options" href="#mangdl.api.base.ddos_guard.options">options</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.patch" href="#mangdl.api.base.ddos_guard.patch">patch</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.post" href="#mangdl.api.base.ddos_guard.post">post</a></code></li>
<li><code><a title="mangdl.api.base.ddos_guard.put" href="#mangdl.api.base.ddos_guard.put">put</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mangdl.api.base.req" href="#mangdl.api.base.req">req</a></code></h4>
<ul class="two-column">
<li><code><a title="mangdl.api.base.req.delete" href="#mangdl.api.base.req.delete">delete</a></code></li>
<li><code><a title="mangdl.api.base.req.get" href="#mangdl.api.base.req.get">get</a></code></li>
<li><code><a title="mangdl.api.base.req.head" href="#mangdl.api.base.req.head">head</a></code></li>
<li><code><a title="mangdl.api.base.req.options" href="#mangdl.api.base.req.options">options</a></code></li>
<li><code><a title="mangdl.api.base.req.patch" href="#mangdl.api.base.req.patch">patch</a></code></li>
<li><code><a title="mangdl.api.base.req.post" href="#mangdl.api.base.req.post">post</a></code></li>
<li><code><a title="mangdl.api.base.req.put" href="#mangdl.api.base.req.put">put</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
If you have spotted some errors in this site, do not hesitate to report it <a target="_blank" href="https://github.com/MangDL/mdl/issues/new">here</a> or at the <a target="_blank" href="https://discord.com/invite/JbAtUxGcJZ">Discord Support Server</a>, or just fix it yourself <a target="_blank" href="https://github.com/MangDL/mdl/">here</a>.
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>